namespace = mind_flayer

### Add elder brain to starting planet
country_event = {
	id = mind_flayer.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_valid_civic = civic_nice_mind_flayer
	}

	immediate = {
		capital_scope = {
			# Add brain & organic pool to starting world 
			add_deposit = d_elder_brain_1
			add_deposit = d_elder_brain_upkeep

			# Army
			create_army = {
				name = "NAME_nice_elder_brain_1_army"
				type = "nice_elder_brain_1_army"
			}
		}
		give_technology = { tech = tech_t1_elder_brain }
		give_technology = { tech = tech_t2_elder_brain }
	}
}

# Galaxy Brain complete
country_event = {
	id = mind_flayer.2
	title = mind_flayer.2.name
	desc = mind_flayer.2.desc

	picture = GFX_evt_vortex
	show_sound = event_space_amoeba
	location = from

	is_triggered_only = yes

	option = {
		name = mind_flayer.2.option_1
		add_modifier = {
			modifier = mod_galaxy_brain_empire
			days = -1
		}
	}
}

### Add secondary species to planet
country_event = {
	id = mind_flayer.3
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_valid_civic = civic_nice_mind_flayer
	}

	immediate = {
		capital_scope = {
			# Create thrall pops
			create_species = {
				name = "Mind Thrall"
				plural = "Mind Thralls"
				class = FUN
				portrait = "fun11"
				namelist = "FUN4"
				homeworld = root

				traits = {
					ideal_planet_class = root
					trait = trait_nice_mind_thrall
					trait = trait_hive_mind
				}
			}
			while = {
				count = 5
				# Remove one of our pops
				kill_own_pop = yes
				
				# Add thrall pop instead
				create_pop = {
					species = last_created_species
				}
			}
		}
	}
}
