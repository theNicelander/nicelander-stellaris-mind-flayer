namespace = mind_flayer

### Add elder brain to starting planet
country_event = {
	id = mind_flayer.1
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_valid_civic = civic_nice_mind_flayer
	}

	immediate = {
		capital_scope = {
			# Add brain & organic pool to starting world 
			add_deposit = d_elder_brain_1
			add_deposit = d_elder_brain_upkeep

			# Army
			create_army = {
				name = "NAME_nice_elder_brain_1_army"
				type = "nice_elder_brain_1_army"
			}
		}
		give_technology = { tech = tech_t1_elder_brain }
		give_technology = { tech = tech_t2_elder_brain }
	}
}

# Galaxy Brain complete
country_event = {
	id = mind_flayer.2
	title = mind_flayer.2.name
	desc = mind_flayer.2.desc

	picture = GFX_evt_vortex
	show_sound = event_space_amoeba
	location = from

	is_triggered_only = yes

	option = {
		name = mind_flayer.2.option_1
		add_modifier = {
			modifier = mod_galaxy_brain_empire
			days = -1
		}
	}
}

### Add secondary species to planet
country_event = {
	id = mind_flayer.3
	hide_window = yes
	is_triggered_only = yes

	trigger = {
		has_valid_civic = civic_nice_mind_flayer
	}

	immediate = {
		random_owned_species = {
			limit = {
				has_trait = trait_nice_tadpole
			}
			set_species_flag = mind_thrall_species_flag
			save_global_event_target_as = mind_thrall_species
			
			# make sure mind thralls can grow
			mind_thrall_species_rights_adjustment = yes

		}
		capital_scope = {
			while = {
				count = 5
				# Remove one of our pops
				kill_own_pop = yes
				
				# Add thrall pop instead
				create_pop = {
					species = event_target:mind_thrall_species
				}
			}
		}
	}
}
